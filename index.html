<html>
<head>
<style>
table {
  font-family: arial, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

td, th {
  border: 1px solid #dddddd;
  text-align: left;
  padding: 8px;
}

tr:nth-child(even) {
  background-color: #dddddd;
}
</style>
</head>
<body>
<div id="buttonsDiv">
 <button onclick="showInfo()">Show</button>
</div>

<div id="infoDiv">
<script>
 function printInfo(id){
  let index = arrayFind(proj,id);
  document.write("ID: "+id+"<br>");
  document.write("Type: "+proj[index].type+"<br>");
  document.write("Name: "+proj[index].name+"<br>");
  document.write("Status: "+proj[index].timeline.status[proj[index].timeline.status.length - 1]+"<br>");
  
  let table = tabInfoUpdates;
  console.log(proj[index].timeline.dates);
  for (var i in proj[index].timeline.dates) {
   console.log(i);
   let row = table.insertRow();
   let date = row.insertCell();
   date.innerHTML = proj[index].timeline.dates[i];
   let status = row.insertCell();
   status = proj[index].timeline.status[i];
  }
 }
</script>
<div id="infoTableDiv">
 <table id="infoTable">
  <tr>
   <th>Date</th>
   <th>Status</th>
  </tr>
 </table>
</div>
</div>

<div id="tablesDiv" style="margin-left: 16px;margin-right: 16px;margin-top: 16px;margin-bottom: 16px;">
 <div id="nextAr" style="margin-top: 8px;margin-left: 8px;margin-right: 8px;margin-bottom: 8px;">
  <table id="nextArTable">
   <tr>
    <th colspan="6">Next Arrival:</th>
   </tr>
   <tr>
    <th style="width: 10%;">ID</th>
    <th style="width: 10%;">Type</th>
    <th style="width: 30%;">Name</th>
    <th style="width: 10%;">Status</th>
    <th style="width: 10%;">Appear date</th>
    <th style="width: 10%;">Last update</th>
   </tr>
  </table>
 </div>

 <div id="upcoming" style="margin-top: 8px;margin-left: 8px;margin-right: 8px;margin-bottom: 8px;">
  <table id="upcomingTable">
   <tr>
    <th colspan="6">Upcoming:</th>
   </tr>
   <tr>
    <th style="width: 10%;">ID</th>
    <th style="width: 10%;">Type</th>
    <th style="width: 30%;">Name</th>
    <th style="width: 10%;">Status</th>
    <th style="width: 10%;">Appear date</th>
    <th style="width: 10%;">Last update</th>
   </tr>
  </table>
 </div>

 <div id="inProd" style="margin-top: 8px;margin-left: 8px;margin-right: 8px;margin-bottom: 8px;">
  <table id="inProdTable">
   <tr>
    <th colspan="6">In Production:</th>
   </tr>
   <tr>
    <th style="width: 10%;">ID</th>
    <th style="width: 10%;">Type</th>
    <th style="width: 30%;">Name</th>
    <th style="width: 10%;">Status</th>
    <th style="width: 10%;">Appear date</th>
    <th style="width: 10%;">Last update</th>
   </tr>
  </table>
 </div>

 <div id="inPlan" style="margin-top: 8px;margin-left: 8px;margin-right: 8px;margin-bottom: 8px;">
  <table id="inPlanTable">
   <tr>
    <th colspan="6">In Planning:</th>
   </tr>
   <tr>
    <th style="width: 10%;">ID</th>
    <th style="width: 10%;">Type</th>
    <th style="width: 30%;">Name</th>
    <th style="width: 10%;">Status</th>
    <th style="width: 10%;">Appear date</th>
    <th style="width: 10%;">Last update</th>
   </tr>
  </table>
 </div>

 <div id="rel" style="margin-top: 8px;margin-left: 8px;margin-right: 8px;margin-bottom: 8px;">
  <table id="relTable">
   <tr>
    <th colspan="6">Released:</th>
   </tr>
   <tr>
    <th style="width: 10%;">ID</th>
    <th style="width: 10%;">Type</th>
    <th style="width: 30%;">Name</th>
    <th style="width: 10%;">Status</th>
    <th style="width: 10%;">Appear date</th>
    <th style="width: 10%;">Last update</th>
   </tr>
  </table>
 </div>

 <div id="can" style="margin-top: 8px;margin-left: 8px;margin-right: 8px;margin-bottom: 8px;">
  <table id="canTable">
   <tr>
    <th colspan="6">Canceled:</th>
   </tr>
   <tr>
    <th style="width: 10%;">ID</th>
    <th style="width: 10%;">Type</th>
    <th style="width: 30%;">Name</th>
    <th style="width: 10%;">Status</th>
    <th style="width: 10%;">Appear date</th>
    <th style="width: 10%;">Last update</th>
   </tr>
  </table>
 </div>
</div>

<script>
 async function createTable() {  
  let data = await fetch("https://raw.githubusercontent.com/MrAsieru/TSWRoadmapTracker/master/data.json").then((response) => {return response.json()});
  proj = data.Projects;
  document.getElementById("nextArTable").style.wordWrap = "break-word";
  document.getElementById("upcomingTable").style.wordWrap = "break-word";
  document.getElementById("inProdTable").style.wordWrap = "break-word";
  document.getElementById("inPlanTable").style.wordWrap = "break-word";
  document.getElementById("relTable").style.wordWrap = "break-word";
  document.getElementById("canTable").style.wordWrap = "break-word";
  for (var i in proj){
   let table = selectTable(proj[i].timeline.status[proj[i].timeline.status.length - 1]);
   let row = table.insertRow();
   let id = row.insertCell();
   id.innerHTML = proj[i].id;
   let type = row.insertCell();
   type.innerHTML = setTypeColor(proj[i].type);
   let name = row.insertCell();
   name.innerHTML = proj[i].name;
   let status = row.insertCell();
   status.innerHTML = setTypeColor(proj[i].timeline.status[proj[i].timeline.status.length - 1]);
   let appDate = row.insertCell();
   appDate.innerHTML = proj[i].timeline.dates[0];
   let lastUpd = row.insertCell();
   lastUpd.innerHTML = proj[i].timeline.dates[proj[i].timeline.dates.length - 1];
  }
 }
 function setTypeColor(type){
  let result,start = "";
  switch(type) {
   case "Preserved Collection":
   start = '<p style="background-color:LimeGreen;">';
   break;
   case "Route Add-On":
   start = '<p style="background-color:Orange;">';
   break;
   case "Loco Add-On":
   start = '<p style="background-color:LightBlue;">';
   break;
   case "Upgrade":
   start = '<p style="background-color:Tomato;">';
   break;
   case "Feature":
   start = '<p style="background-color:Blue;">';
   break;
   case "Fix":
   start = '<p style="background-color:Purple;">';
   break;
   case "Route Upgrade":
   start = '<p style="background-color:Olive;">';
   break;
   case "Released":
   start = '<p style="background-color:Magenta;">';
   break;
  }
  return (start+type+"</p>")
 }

 function selectTable(status){
  var result = "";
  switch(status) {
   case "Next Arrival":
   result = "nextArTable";
   break;
   case "Upcoming":
   result = "upcomingTable";
   break;
   case "In Production":
   result = "inProdTable";
   break;
   case "In Planning":
   result = "inPlanTable";
   break;
   case "Released":
   result = "relTable";
   break;
   case "Canceled":
   result = "canTable";
   break;
  }
  return document.getElementById(result);
 }
 
 function arrayFind(data,val){
  var i = 0;
  var finished = false;
  while(i < data.length && !finished) {
   if (data[i].id == val) {
    finished = true;
   }
   i++;
  }
  if (finished) {
   return i;
  } else {
   return null;
  }
 }

 function changePageState(state){
  console.log(document.getElementById("tablesDiv"));
  console.log(document.getElementById("infoDiv"));
  switch(state){
  case 0:
  document.getElementById("tablesDiv").style.display = "block";
  document.getElementById("infoDiv").style.display = "none";
  break;
  case 1:
  document.getElementById("tablesDiv").style.display = "none";
  document.getElementById("infoDiv").style.display = "bock";
  break;
  }
 }

 function showInfo(){
  printInfo("NDD-L7 01");  
  changePageState(1);
 }

 var proj = "";
 var tabInfoUpdates = document.getElementById("infoTable");
 createTable();
</script>
</body>
</html>